
<div id="header" align="center">
  <img src="https://media.giphy.com/media/M9gbBd9nbDrOTu1Mqx/giphy.gif" width="100"/>
</div>


### Модульное тестирование (Unit tests) с помощью PHPUnit
* Установка PHPUnit и написание первый тест
  Для начала нужно установить версию php7.2+ и composer. Затем в проекте устанавливаем phpunit:

composer require --dev phpunit/phpunit
* Фикстуры (Fixture)
  Фиксутра — настройка окружения и возврат его в исходное состояние. Звучит страшно, но на самом деле это просто методы, которые позволяют настроить окружение для теста. В классе \PHPUnit\Framework\TestCase для этого есть методы:

setUp выполняются перед каждым тестом тестового класса;
tearDown выполняются после каждого теста тестового класса;
setUpBeforeClass — выполняется перед первым тестом в тестовом классе;
tearDownAfterClass — выполняется после запуска последнего теста тестового класса.
* Утверждение (Asserts)
  Утверждения — это методы класса TestCase, которые помогают проверить тест. Все эти методы начинаются с assert (assertTrue, assertSame, assertClassHasAttribute и т.д.). После выполнения тестов будет показано кол-во выполненных тестов и кол-во выполненных утверждений. В случае неверного утверждения тест считается проваленным.

Тестовые двойники (Заглушки, Stubs, Mocks)
* Mock — отличается от стаба тем, что еще описывает какое-то поведение и его изменение влияет на выполнение теста.

При тестировании одного класса в разных его методах один и тот же внешний объект может быть как моком, так и стабом.
* Покрытие тестами (Tests coverage)
  С помощью этого инструмента очень легко понять насколько качественно написаны тесты, сколько файлов покрыты тестами и какие строки в них покрыты. Данный инструмент очень сильно помогает отслеживать качество ваших тестов.

Необходимо к вашему php-cli подключить xdebug иначе coverage будет недоступен и вы получите уведомление об отсутствии модуля для тестирования.

Чтобы его использовать достаточно дописать к phpunit —coverage-{type} атрибут. Например очень удобно использовать HTML-формат покрытия:

1
vendor/bin/phpunit --configuration phpunit.xml --coverage-html coverage
После этого в проекте создается папка coverage и мы можем открыть файл index.html и просмотреть подробную информацию о каждом файле тестирования.